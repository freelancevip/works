<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Еще один калькулятор</title>
	<style type="text/css">
	.simple-calculator {
		width: 600px;
		border: 1px solid #000;
		padding: 64px 32px;
		box-sizing: border-box;
	}
	.simple-calculator label {
		cursor:pointer;
	}
	.simple-calculator p {
		padding-bottom: 32px;
	}
	.result {
		text-align:center;
	}
	</style>
</head>
<body>
	<div id="calculator7" class="simple-calculator">
		<p>
			<span>Формат</span><br>
			<label for="7size10x10"><input data-calc-role="format" type="radio" id="7size10x10" name="szs7[]" value="10x10" checked>10x10</label>
			<label for="7size15x15"><input data-calc-role="format" type="radio" id="7size15x15" name="szs7[]" value="15x15">15x15</label>
			<label for="7size15x20"><input data-calc-role="format" type="radio" id="7size15x20" name="szs7[]" value="15x20">15x20</label>
			<label for="7size20x20"><input data-calc-role="format" type="radio" id="7size20x20" name="szs7[]" value="20x20">20x20</label>
			<label for="7size20x30"><input data-calc-role="format" type="radio" id="7size20x30" name="szs7[]" value="20x30">20x30</label>
			<label for="7size25x25"><input data-calc-role="format" type="radio" id="7size25x25" name="szs7[]" value="25x25">25x25</label>
			<label for="7size30x30"><input data-calc-role="format" type="radio" id="7size30x30" name="szs7[]" value="30x30">30x30</label>
			<label for="7size30x40"><input data-calc-role="format" type="radio" id="7size30x40" name="szs7[]" value="30x40">30x40</label>
		</p>
		<p>
			<label for="razvorot7">Количечтво разворотов (от 15 до 45)</label><input type="text" id="razvorot7" value="15">
		</p>
		<p>
			<span>Утолщение</span><br>
			<input class="thickness" type="radio" data-calc-role="thickness" id="rounds17" value="0" name="rounds7[]" checked><label for="rounds17">без утолщения</label>
			<input class="thickness" type="radio" data-calc-role="thickness" id="rounds27" value="1" name="rounds7[]"><label for="rounds27">Утолщение страниц 1мм</label>
			<input class="thickness" type="radio" data-calc-role="thickness" id="rounds37" value="2" name="rounds7[]"><label for="rounds37">Утолщение страниц 2мм</label>
		</p>
		<p>
			<span>Бумага</span><br>
			<input class="paper" type="radio" data-calc-role="paper" id="paper17" value="" name="paper7[]" disabled checked><label for="paper17">Фотобумага матовая</label>
			<input class="paper" type="radio" data-calc-role="paper" id="paper27" value="Silk" name="paper7[]" disabled><label for="paper27">Фотобумага Silk</label>
		</p>
		<p>
			<span>Форзац</span><br>
			<input class="forsaz" data-calc-role="forsaz" type="radio" id="forsaz17" value="0" name="forsaz7[]" checked><label for="forsaz17">Нет</label>
			<input class="forsaz" data-calc-role="forsaz" type="radio" id="forsaz27" value="1" name="forsaz7[]"><label for="forsaz27">Есть</label>
		</p>
		<p>
			<span>Вид корешка</span><br>
			<input class="leather-belt-type" data-calc-role="belt-type" type="radio" id="belttype17" value="round" name="belttype7[]" checked><label for="belttype17">Круглый</label>
			<input class="leather-belt-type" data-calc-role="belt-type" type="radio" id="belttype27" value="square" name="belttype7[]"><label for="belttype27">Квадратный</label>
		</p>
		<p>
			<span>Окна под фото в обложке (0 до 4)</span>
			<label for="window7"></label><input type="text" data-calc-role="window" id="window7">
			<br/>
		</p>
		<p>
			<span>Бинты</span><br/>
			<input class="bint" data-calc-role="bint" type="radio" id="bint17" value="0" name="bint7[]" checked><label for="bint17">Нет</label>
			<input class="bint" data-calc-role="bint" type="radio" id="bint27" value="1" name="bint7[]"><label for="bint27">Есть</label>
		</p>
		<p>
			<span>Скругление углов</span><br/>
			<input class="bint" data-calc-role="round-corners" type="radio" id="round-corners17" value="0" name="round-corners7[]" checked><label for="round-corners17">Нет</label>
			<input class="bint" data-calc-role="round-corners" type="radio" id="round-corners27" value="1" name="round-corners7[]"><label for="round-corners27">Есть</label>
		</p>
		<p>
			<span>Мягкость обложки</span><br/>
			<input class="softness" data-calc-role="softness" type="radio" id="softness17" value="0" name="softness7[]" checked><label for="softness17">Нет</label>
			<input class="softness" data-calc-role="softness" type="radio" id="softness27" value="1" name="softness7[]"><label for="softness27">Есть</label>
		</p>
		<p>
			<span>Комбинирование 2-х видов кож</span><br/>
			<input class="combine" data-calc-role="combine" type="radio" id="combine17" value="0" name="combine7[]" checked><label for="combine17">Нет</label>
			<input class="combine" data-calc-role="combine" type="radio" id="combine27" value="1" name="combine7[]"><label for="combine27">Есть</label>
		</p>
		<p>
			<span>Канавка (от 0 до 4)</span>
			<label for="canavka7"></label><input type="text" data-calc-role="canavka" id="canavka7">
			<br/>
		</p>
		<div id="result7" class="result">Стоимость 1398 руб.</div>
	</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript">
(function($){
	/* Calculator options */
	var options = {
		minRazvorotov: 15,
		maxRazvorotov: 45,
		beforePrice: 'Стоимость ',
		afterPrice: ' руб.',
		leatherBelt: {
			round : 0,    // Кожаный корешок, + за круглый, за место нуля поставитть 40 руб и 55 руб
			square: 0     // Кожаный корешок, + за квадратный, за место нуля поставитть 40 руб и 55 руб
		},
		window: 200,      // Окна под фото в обложке (0 до 4), стоимость одного
		maxWindow: 4,     // Макс. кол-во окон под фото
		bint: 100,        // Бинты 
		roundCorners: 200,// Скругление углов
		softness: 300,    // Мягкость обложки
		combine: 500,     // Комбинирование 2-х видов кож
		canavka: 50,      // Канавка (от 0 до 4)
		maxCanavka: 4,    // Макс. кол-во канавок
		'10x10': {
			start: 1398, // Стоимость за 15 разворотов
			razvCost0mm: 32,
			razvCost0mmSilk: false,
			razvCost1mm: 47,
			razvCost1mmSilk: false,
			razvCost2mm: 65,
			razvCost2mmSilk: false,
			forsaz: 215
		},
		'15x15': {
			start: 1597,
			razvCost0mm: 41,
			razvCost0mmSilk: false,
			razvCost1mm: 59,
			razvCost1mmSilk: false,
			razvCost2mm: 79,
			razvCost2mmSilk: false,
			forsaz: 285
		},
		'15x20': {
			start: 2288,
			razvCost0mm: 58,
			razvCost0mmSilk: false,
			razvCost1mm: 78,
			razvCost1mmSilk: false,
			razvCost2mm: 98,
			razvCost2mmSilk: false,
			forsaz: 340
		},
		'20x20' : {
			start: 2790,
			razvCost0mm: 89,
			razvCost0mmSilk: 111,
			razvCost1mm: 99,
			razvCost1mmSilk: 139,
			razvCost2mm: 129,
			razvCost2mmSilk: 159,
			forsaz: 400
		},
		'20x30' : {
			start: 3380,
			razvCost0mm: 111,
			razvCost0mmSilk: 139,
			razvCost1mm: 139,
			razvCost1mmSilk: 169,
			razvCost2mm: 159,
			razvCost2mmSilk: 189,
			forsaz: 500
		},
		'25x25' : {
			start: 3490,
			razvCost0mm: 139,
			razvCost0mmSilk: 179,
			razvCost1mm: 156,
			razvCost1mmSilk: 193,
			razvCost2mm: 179,
			razvCost2mmSilk: 224,
			forsaz: 600
		},
		'30x30' : {
			start: 4796,
			razvCost0mm: 179,
			razvCost0mmSilk: 259,
			razvCost1mm: 199,
			razvCost1mmSilk: 269,
			razvCost2mm: 229,
			razvCost2mmSilk: 289,
			forsaz: 850
		},
		'30x40' : {
			start: 5600,
			razvCost0mm: 259,
			razvCost0mmSilk: 299,
			razvCost1mm: 284,
			razvCost1mmSilk: 333,
			razvCost2mm: 299,
			razvCost2mmSilk: 354,
			forsaz: 1000
		}
	};
	/*
	 * Simple calculator
	 */
	var Calculator = function (options) {
		this.inputData = {};
		this.options = options;
		// @return Int price
		this.calc = function (format, numRazv, thickness, paper, forsaz, leatherBelt, leatherBeltType, window, bint, roundCorners, softness, combine, canavka) {
			// format 15x20
			// numRazv from 10 to 45
			// thickness 0||1||2
			// paper ''||Silk
			// forsaz boolean
			// leatherBelt boolean
			// leatherBeltType 'square' || 'round'
			// window Int 1 to 4
			// bint Bool
			// roundCorners Bool
			// softness Bool
			// combine Bool
			// canavka Int 1 to 4
			var result = 0;
			var options = this.options;
			var oblCost = this.getOblCost(format);
			var currentPriceKey = 'razvCost' + thickness + 'mm' + paper;
			result = options[format][currentPriceKey] * numRazv + this.getOblCost(format);
			if(forsaz == true) {
				result += options[format].forsaz;
			}
			if(leatherBelt && leatherBeltType) {
				result += options.leatherBelt[leatherBeltType];
			}
			result += options.window * window;
			if(bint) {
				result += options.bint;
			}
			if(roundCorners) {
				result += options.roundCorners;
			}
			if(softness) {
				result += options.softness;
			}
			if(combine) {
				result += options.combine;
			}
			result += options.canavka * canavka;
			
			return result;
		};
		
		this.getOblCost = function(format) {
			var options = this.options;
			return options[format].start - options[format].razvCost0mm * options.minRazvorotov; // Стоимость обложки
		};
	};
	var calc = new Calculator(options);
	$(document).on("change input", "#calculator7 input", function(e){
		var validation = {};
		var $cWrap = $("#calculator7");
		var format = $cWrap.find("input[data-calc-role=format]:checked").val();
		var numRazv = parseInt($("#razvorot7").val());
		var leatherBelt = 1;
		var leatherBeltType = "";
		
		if(leatherBelt == 1) {
			leatherBeltType = $cWrap.find("input[data-calc-role=belt-type]:checked").val();
		}
		
		if(options[format].razvCost0mmSilk == false)
			$cWrap.find("input[data-calc-role=paper]").attr("disabled", true);
		else
			$cWrap.find("input[data-calc-role=paper]").attr("disabled", false);
		if(numRazv < options.minRazvorotov || !$.isNumeric(numRazv)) {
			validation.status = false;
			validation.text = "Минимальное количесво разворотов 15";
		} else if (numRazv > options.maxRazvorotov) {
			$("#razvorot7").val(options.maxRazvorotov);
		}
			
		var thickness = $cWrap.find("input[data-calc-role=thickness]:checked").val();
		var paper = $cWrap.find("input[data-calc-role=paper]:checked").val();
		var forsaz = $cWrap.find("input[data-calc-role=forsaz]:checked").val();
		
		var window = parseInt($cWrap.find("input[data-calc-role=window]").val());
		if(!$.isNumeric(window) || window > options.maxWindow || window <0) {
			window = 0;
			$cWrap.find("input[data-calc-role=window]").val("0")
		}
		
		var canavka = parseInt($cWrap.find("input[data-calc-role=canavka]").val());
		if(!$.isNumeric(canavka) || canavka > options.maxCanavka || canavka <0) {
			canavka = 0;
			$cWrap.find("input[data-calc-role=canavka]").val("0")
		}
		var bint        = ($cWrap.find("input[data-calc-role=bint]:checked").val()         == "1");
		var roundCorners= ($cWrap.find("input[data-calc-role=round-corners]:checked").val()== "1");
		var softness    = ($cWrap.find("input[data-calc-role=softness]:checked").val() == "1");
		var combine     = ($cWrap.find("input[data-calc-role=combine]:checked").val() == "1");
		
		var price = calc.calc(format, numRazv, thickness, paper, forsaz, leatherBelt, leatherBeltType, window, bint, roundCorners, softness, combine, canavka);
		
		var str = options.beforePrice + price + options.afterPrice;
		if(validation.status == false)
			str = validation.text;
		
		$("#result7").text(str);
	})
})(jQuery)
</script>
</body>
</html>